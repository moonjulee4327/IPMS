<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace : xml파일은 여러개일 수 있음.
이를 구별하기 위한 식별 용도로 사용 -->
<mapper namespace="com.ipms.mapper.MemMapper">
    <!-- 로그인-->
    <select id="loginMem" parameterType="com.ipms.main.vo.MemVO" resultType="int">
        select count(*)
        from mem
        where mem_email =  #{email} and mem_passwd=  #{paswd}
    </select>

<!--이메일 중복체크 -->
    <select id="registerCheck" resultType="int" parameterType="com.ipms.main.vo.MemVO">
        select count(*)
        from mem
        where mem_email =#{email} and mem_passwd= #{paswd}
    </select>



    <!--회원가입-->
    <insert id="registerMember" parameterType="com.ipms.main.vo.MemVO">
        <selectKey order="BEFORE" keyProperty="memNum" resultType="String">
            SELECT  To_char(NVL(MAX(mem_num),0)+1) FROM mem
        </selectKey>
        INSERT INTO mem (
        mem_num,
        mem_email,
        mem_passwd,
        mem_name,
        mem_dvmnt_area,
        mem_whdrl_whth,
        mem_phone_number,
        mem_sgnup_date
        ) VALUES (
        #{memNum},
        #{email},
        #{paswd},
        #{name},
        'spring',
                  '0',
        'phone',
        sysdate
        )
    </insert>

</mapper>

